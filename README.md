# Food Delivery

# Начало проекта: 24.12.2024 10:00

## Описание

Food Delivery — это приложение для онлайн-заказа еды с функциональностью аутентификации пользователей, работы с ресторанами, заказами, доставкой и оплатой. 
Приложение использует монолитную архитектуру, где все компоненты взаимодействуют в рамках одного приложения. 
Каждый компонент отвечает за свою область: аутентификацию, работу с ресторанами, заказами, доставкой и оплатой.

Проект реализован с использованием Go и предоставляет полный цикл работы с заказами еды от аутентификации пользователей до обработки заказов и оплаты.

## Структура проекта

Проект организован по директориям, каждая из которых отвечает за свою задачу:

/food-delivery
├── /cmd
│   ├── init_modules.go          # Инициализация всех модулей
│   └── main.go                  # Основная точка входа приложения
├── /configs                     # Конфигурационные файлы
│   └── config.yaml              # Общий конфигурационный файл
├── /api                         # Слой API с эндпоинтами
│   └── /http                    # Маршруты http
│       └── router.go            # Настройка маршрутов
├── /configs                     # Файл конфигураций
│   └── config.env               # Конфигурационный файл .env
├── /internal                    # Логика приложения
│   ├── /auth                    # Логика аутентификации (пользователи, JWT)
│   │   ├── /repository          # Работа с базой данных для пользователей
│   │   ├── /service             # Логика работы с пользователями, сессиями и JWT
│   │   ├── /handler             # Хендлеры для аутентификации
│   │   └── /entities            # Сущности, такие как User, Claim и другие
│   ├── /admin                   # Логика администрирования
│   │   ├── /user                # Логика работы с пользователями (регистрация, удаление)



│   │   ├── /restaurant          # Логика работы с ресторанами (создание, обновление меню)
│   │   ├── /order               # Логика работы с заказами (создание, изменение, отмена)
│   │   ├── /payment             # Логика работы с оплатами (выставление счетов, оплата)
│   │   └── /delivery            # Логика работы с доставкой (курьеры, маршруты)
│   ├── /restaurant              # Логика работы с ресторанами
│   │   ├── /repository          # Работа с базой данных
│   │   ├── /service             # Логика работы с ресторанами
│   │   └── /handler             # Хендлеры для ресторанов
│   ├── /order                   # Логика работы с заказами
│   │   ├── /repository          # Работа с базой данных
│   │   ├── /service             # Логика работы с заказами
│   │   └── /handler             # Хендлеры для заказов
│   ├── /delivery                # Логика работы с доставкой
│   │   ├── /repository          # Работа с базой данных
│   │   ├── /service             # Логика работы с доставкой
│   │   └── /handler             # Хендлеры для доставки
│   └── /payment                 # Логика работы с оплатой
│       ├── /repository          # Работа с MongoDB
│       ├── /service             # Логика работы с оплатой
│       └── /handler             # Хендлеры для оплаты
├── /pkg                         # Общие библиотеки
│   ├── /logger                  # Логирование
│   │   └── logger.go
│   ├── /middlewares             # Общие middleware (например, JWT, CORS)
│   │   └── jwt_middleware.go
│   └── /utils                   # Утилиты
│       └── utils.go
├── /tests                       # Интеграционные и юнит-тесты
│   ├── /auth
│   ├── /restaurant
│   ├── /order
│   ├── /delivery
│   └── /payment
└── README.md                    # Описание проекта

## Запуск проекта

### Требования

- Go 1.20 или выше
- Docker (для работы с контейнерами)
- PostgreSQL (для хранения данных о пользователях, ресторанах и заказах)
- MongoDB (для хранения данных о платежах)

### Установка

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/yourusername/food-delivery.git
    cd food-delivery
    ```

2. Установите зависимости:
    ```bash
    go mod tidy
    ```

3. Настройте конфигурационный файл `configs/config.yaml`, указав настройки для базы данных и других сервисов.

4. Запустите необходимые сервисы (PostgreSQL, MongoDB) через Docker:
    ```bash
    docker-compose up -d
    ```

5. Запустите приложение:
    ```bash
    go run cmd/main.go
    ```

Теперь ваше приложение будет доступно по адресу `http://localhost:5555`.

## Структура API

### Аутентификация

Эндпоинты для аутентификации пользователей:
- **POST /api/auth/sign-in** — Вход пользователя по email и password.
- **POST /api/auth/register** — Регистрация нового пользователя.
- **POST /api/auth/sign-out** — Выход из аккаунта.
- **POST /api/auth/refresh** — Выдача нового access & refresh токенов.
- **GET /api/auth/confirm-email** — Подтверждение email аккаунта.

### Рестораны

Эндпоинты для работы с ресторанами:
- **GET /api/restaurant** — Получить список ресторанов.
- **POST /api/restaurant** — Добавить новый ресторан.
- **PUT /api/restaurant/{id}** — Обновить информацию о ресторане.
- **DELETE /api/restaurant/{id}** — Удалить ресторан.

### Заказы

Эндпоинты для работы с заказами:
- **GET /api/order** — Получить список заказов.
- **POST /api/order** — Создать новый заказ.
- **PUT /api/order/{id}** — Обновить статус заказа.
- **DELETE /api/order/{id}** — Отменить заказ.

### Доставка

Эндпоинты для работы с доставкой:
- **GET /api/delivery** — Получить информацию о доставке.
- **POST /api/delivery** — Назначить доставку на заказ.
- **PUT /api/delivery/{id}** — Обновить статус доставки.
- **DELETE /api/delivery/{id}** — Отменить доставку.

### Оплата

Эндпоинты для работы с оплатой:
- **POST /api/payment** — Совершить платеж.
- **GET /api/payment/{id}** — Получить статус платежа.

## Логирование

Логирование реализовано через пакет `logger` в `/pkg/logger`. Все важные события приложения (например, запросы, ошибки) логируются с использованием разных уровней логирования: `INFO`, `ERROR`, `WARNING`.

## Тесты

Все тесты проекта находятся в директории `/tests`. Используются юнит-тесты и интеграционные тесты для проверки правильности работы различных сервисов и API-эндпоинтов.

Для запуска тестов используйте команду:
```bash
go test ./tests/...
```

## Планы на будущее
1. Микросервисная архитектура — планируется переработка системы в микросервисы для повышения масштабируемости и независимости компонентов.
2. Интеграция с внешними сервисами — добавление возможности интеграции с платёжными системами и курьерскими службами для автоматизации процессов.
3. Поддержка мобильных приложений — расширение функционала для поддержки мобильных приложений с использованием REST API.